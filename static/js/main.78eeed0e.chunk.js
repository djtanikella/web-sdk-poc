(this["webpackJsonpweb-sdk-poc"]=this["webpackJsonpweb-sdk-poc"]||[]).push([[0],{196:function(e,t,n){},321:function(e,t,n){},327:function(e,t){},328:function(e,t){},336:function(e,t){},339:function(e,t,n){"use strict";n.r(t);var a=n(37),c=n(44),r=n.n(c),s=n(240),i=n.n(s),o=(n(321),n(11)),u=n.n(o),l=n(146),j=n(16),d=n(4),b=n(197);n(337),n(338);function h(){return(h=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={video:!0,audio:!1},e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia(n);case 4:a=e.sent,t.srcObject=a,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function f(e,t){var n=t[0]-e[0],a=t[1]-e[1];return Math.atan2(n,a)*(180/Math.PI)-90}function v(e,t){var n=t[0]-e[0],a=t[2]-e[2];return Math.atan2(n,a)*(180/Math.PI)-90}function O(e,t){var n=t[1]-e[1],a=t[2]-e[2];return Math.atan2(n,a)*(180/Math.PI)+90}var p=3,x=3,m=5;n(196);var g,w=function(e){var t=e.state,n=e.message,c=t?1:0;return Object(a.jsx)("div",{style:{opacity:c},className:"errorBox",children:n})};function y(e){var t=e.metric,n=e.pointOne,c=e.pointTwo;return Object(a.jsxs)("div",{className:"positionCard",children:[Object(a.jsxs)("div",{className:"primaryValue",children:[t.name,": ",t.value,"\xb0"]}),Object(a.jsxs)("div",{className:"coordinates",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:n.name}),Object(a.jsxs)("pre",{children:["x: ",n.value[0]&&n.value[0].toFixed(1)]}),Object(a.jsxs)("pre",{children:["y: ",n.value[1]&&n.value[1].toFixed(1)]}),Object(a.jsxs)("pre",{children:["z: ",n.value[2]&&n.value[2].toFixed(1)]})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:c.name}),Object(a.jsxs)("pre",{children:["x: ",c.value[0]&&c.value[0].toFixed(1)]}),Object(a.jsxs)("pre",{children:["y: ",c.value[1]&&c.value[1].toFixed(1)]}),Object(a.jsxs)("pre",{children:["z: ",c.value[2]&&c.value[2].toFixed(1)]})]})]})]})}var F=function(){var e=Object(c.useRef)(null),t=Object(c.useRef)(!1),n=Object(c.useState)({state:!0,message:"Looking for a face..."}),r=Object(d.a)(n,2),s=r[0],i=r[1],o=Object(c.useState)(0),F=Object(d.a)(o,2),k=F[0],M=F[1],S=Object(c.useState)(0),I=Object(d.a)(S,2),T=I[0],C=I[1],E=Object(c.useState)(0),P=Object(d.a)(E,2),D=P[0],L=P[1],N=Object(c.useState)([]),R=Object(d.a)(N,2),B=R[0],z=R[1],J=Object(c.useState)([]),U=Object(d.a)(J,2),V=U[0],X=U[1],Y=Object(c.useState)([]),q=Object(d.a)(Y,2),A=q[0],G=q[1],H=Object(c.useState)([]),K=Object(d.a)(H,2),Q=K[0],W=K[1],Z=Object(c.useState)(Date.now()),$=Object(d.a)(Z,2),_=$[0],ee=$[1];function te(){console.log("stopwebcam called"),clearInterval(g),e.current=null}function ne(){return ae.apply(this,arguments)}function ae(){return(ae=Object(j.a)(u.a.mark((function n(){var a,c,r,s,i,o,l,j,d,h,p,x,m,g;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=Date.now(),e.current&&t.current){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,b.b(b.a.mediapipeFacemesh,{shouldLoadIrisModel:!1});case 6:return c=n.sent,n.next=9,c.estimateFaces({input:e.current,predictIrises:!1});case 9:r=n.sent,(s=r[0]&&r[0].scaledMesh)&&(i=s[133],o=s[362],l=s[199],j=s[151],(d=Date.now())>_&&(z(i),X(o),G(j),W(l),h=f(i,o),p=v(i,o),x=O(l,j),m=r.length,M(h),C(p),L(x),ee(d),ce({roll:h,yaw:p,pitch:x,faces:m}))),g=Date.now(),console.log("ms: ",g-a),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(3),console.error("error in the setup mesh fn",n.t0);case 19:case"end":return n.stop()}}),n,null,[[3,16]])})))).apply(this,arguments)}function ce(e){var t=e.roll,n=e.yaw,a=e.pitch,c=e.faces;if(1!==c)i({state:!0,message:"It seems like there are ".concat(c," faces")});else if(Math.abs(t)>x){i({state:!0,message:"Turn your head ".concat(t>0?"counter clockwise \u21aa\ufe0f":"clockwise \u21a9\ufe0f")})}else if(Math.abs(n)>p){i({state:!0,message:"Turn your head to the ".concat(n>0?"left \u2b05\ufe0f":"right \u27a1\ufe0f")})}else if(Math.abs(a)>m){i({state:!0,message:"Turn your head ".concat(a>0?"down \u2b07\ufe0f":"up \u2b06\ufe0f")})}else i({state:!1,message:""})}Object(c.useEffect)((function(){return function(e){h.apply(this,arguments)}(e.current),g=setInterval((function(){ne()}),300),function(){return te()}}),[]),Object(c.useEffect)((function(){e.current&&(e.current.onloadeddata=function(e){console.log("onloadedata fired ",e),t.current=!0,ne()})}),[e.current]);var re={border:s.state?"10px solid #ff1744":"15px solid teal",transform:"scaleX(-1)",borderRadius:"40%",objectFit:"cover"},se={metric:{name:"Roll",value:k.toFixed(0)},pointOne:{name:"Left Eye",value:B},pointTwo:{name:"Right Eye",value:V}},ie={metric:{name:"Yaw",value:T.toFixed(0)},pointOne:{name:"Left Eye",value:B},pointTwo:{name:"Right Eye",value:V}},oe={metric:{name:"Pitch",value:D.toFixed(0)},pointOne:{name:"Forehead",value:A},pointTwo:{name:"Chin",value:Q}};return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("video",{id:"webcam",width:"550",height:"500",autoPlay:!0,style:re,muted:!0,ref:e}),Object(a.jsx)("button",{onClick:function(){return te()},children:"stop"}),Object(a.jsx)("button",{onClick:function(){return ne()},children:"capture"}),Object(a.jsx)(w,Object(l.a)({},s)),Object(a.jsxs)("div",{className:"positioningBoxes",children:[Object(a.jsx)(y,Object(l.a)({},se)),Object(a.jsx)(y,Object(l.a)({},ie)),Object(a.jsx)(y,Object(l.a)({},oe))]})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,340)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(F,{})}),document.getElementById("root")),k()}},[[339,1,2]]]);
//# sourceMappingURL=main.78eeed0e.chunk.js.map